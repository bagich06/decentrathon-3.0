# RTMP → RTSP Конвертер

## Описание

Этот проект — сервис-конвертер, который позволяет принимать видеопотоки в формате RTMP (например, от дронов, камер, стриминговых платформ) и отдавать их в формате RTSP. Это решает проблему интеграции между системами, которые поддерживают только RTSP, и источниками, которые выдают только RTMP.

- **Язык:** Go
- **Конвертация:** FFmpeg
- **RTSP-сервер:** MediaMTX (ex rtsp-simple-server)
- **REST API и веб-интерфейс:** Gin + React (Vite)
- **Контейнеризация:** Docker, docker-compose

---

## Возможности

- Приём RTMP-потоков и выдача их как RTSP
- Одновременная работа с несколькими потоками
- Веб-интерфейс для управления потоками (запуск, остановка, статус)
- Логирование событий
- Лёгкий запуск и тестирование через Docker Compose

---

## Быстрый старт

### 1. Клонируйте репозиторий и перейдите в папку проекта

```sh
cd <папка_проекта>
```

### 2. Запустите все сервисы

```sh
docker-compose up --build
```

- Backend (Go + FFmpeg) будет доступен на `localhost:8080`
- RTSP-сервер (MediaMTX) — на `localhost:8554`
- Веб-интерфейс — на `localhost:3000`

---

## Как пользоваться

### 1. Сгенерируйте тестовый RTMP-поток (пример с ffmpeg)

В новом терминале выполните:

```sh
ffmpeg -re -f lavfi -i testsrc=size=1280x720:rate=30 -f lavfi -i sine=frequency=1000 -c:v libx264 -c:a aac -f flv rtmp://localhost:1935/test
```

### 2. Добавьте поток через веб-интерфейс

- Откройте [http://localhost:3000](http://localhost:3000)
- В поле **RTMP URL** вставьте: `rtmp://localhost:1935/test`
- В поле **Stream Key** вставьте: `test`
- Нажмите **Старт**

### 3. Скопируйте RTSP-ссылку из таблицы

- Обычно это: `rtsp://localhost:8554/test`

### 4. Откройте RTSP-поток в VLC или ffplay

- VLC: Файл → Открыть сетевой поток → вставьте ссылку → Воспроизвести
- ffplay:
  ```sh
  ffplay rtsp://localhost:8554/test
  ```

### 5. Остановите поток через веб-интерфейс

---

## Для чего это нужно?

- Интеграция дронов, камер, стриминговых платформ с системами видеонаблюдения
- Унификация видеопотоков для разных систем
- Быстрая демонстрация и тестирование потоков

---

## Требования

- Docker и docker-compose
- ffmpeg (для генерации тестового потока)
- VLC или ffplay (для просмотра RTSP)

---

## Структура проекта

- `main.go` — backend (Go, REST API, запуск ffmpeg)
- `frontend/` — веб-интерфейс (React)
- `docker-compose.yml` — запуск всех сервисов
- `Dockerfile` — сборка backend
- `frontend/Dockerfile` — сборка фронта

---

## Авторы и поддержка

- Проект создан для хакатона.
- Вопросы и предложения — через Issues или напрямую разработчику.
